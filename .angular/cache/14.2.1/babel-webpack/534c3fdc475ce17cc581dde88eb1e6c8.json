{"ast":null,"code":"import _classCallCheck from \"C:/Users/\\u05D0\\u05D1\\u05D9\\u05D1/Documents/\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD/\\u05D4\\u05D2\\u05E9\\u05D4 \\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/Client22/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/\\u05D0\\u05D1\\u05D9\\u05D1/Documents/\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD/\\u05D4\\u05D2\\u05E9\\u05D4 \\u05EA\\u05DB\\u05E0\\u05D5\\u05EA/Client22/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport * as i0 from \"@angular/core\";\nexport var FilterTripsService = /*#__PURE__*/(function () {\n  var FilterTripsService = /*#__PURE__*/function () {\n    function FilterTripsService() {\n      _classCallCheck(this, FilterTripsService);\n    }\n\n    _createClass(FilterTripsService, [{\n      key: \"getFilteredTrips\",\n      value: function getFilteredTrips(trips, filterParams) {\n        var filteredTrips = trips;\n\n        if (filterParams.maxPrice) {\n          filteredTrips = this.getTripsFilteredMaxPrice(filteredTrips, filterParams.maxPrice);\n        }\n\n        if (filterParams.numOfStops) {\n          filteredTrips = this.getTripsFilteredByStopsNum(filteredTrips, filterParams);\n        }\n\n        if (filterParams.flightTime) {\n          filteredTrips = this.getTripsFilteredFlightTime(filteredTrips, filterParams);\n        }\n\n        return filteredTrips;\n      }\n    }, {\n      key: \"getTripsFilteredMaxPrice\",\n      value: function getTripsFilteredMaxPrice(trips, maxPrice) {\n        var filteredTrips = trips.filter(function (trip) {\n          return trip.lowestPriceAgent.price <= maxPrice;\n        });\n        return filteredTrips;\n      }\n    }, {\n      key: \"getTripsFilteredByStopsNum\",\n      value: function getTripsFilteredByStopsNum(trips, filterParams) {\n        var stopsNums = this.getStopsNumberArray(filterParams);\n        var filteredTrips = trips.filter(function (trip) {\n          var outbondStopsNum = trip.outbound.flights.length - 1;\n          var inboundStopsNum;\n\n          if (trip.inbound) {\n            inboundStopsNum = trip.inbound.flights.length - 1;\n          }\n\n          return stopsNums.includes(outbondStopsNum) && (!inboundStopsNum || stopsNums.includes(inboundStopsNum));\n        });\n        return filteredTrips;\n      }\n    }, {\n      key: \"getTripsFilteredFlightTime\",\n      value: function getTripsFilteredFlightTime(trips, filterParams) {\n        var _this = this;\n\n        var filteredTrips = trips.filter(function (trip) {\n          return _this.isInWantedHoursRange(trip.outbound.departure, filterParams.flightTime.outbound);\n        });\n        filteredTrips = filteredTrips.filter(function (trip) {\n          return trip.inbound ? _this.isInWantedHoursRange(trip.inbound.departure, filterParams.flightTime.inbound) : true;\n        });\n        return filteredTrips;\n      }\n    }, {\n      key: \"getStopsNumberArray\",\n      value: function getStopsNumberArray(filterParams) {\n        var result = [];\n\n        if (filterParams.numOfStops.zero) {\n          result.push(0);\n        }\n\n        if (filterParams.numOfStops.one) {\n          result.push(1);\n        }\n\n        if (filterParams.numOfStops.two) {\n          result.push(2);\n        }\n\n        if (filterParams.numOfStops.threeAndMore) {\n          result.push(3, 4);\n        }\n\n        return result;\n      }\n    }, {\n      key: \"isInWantedHoursRange\",\n      value: function isInWantedHoursRange(date, dayTimes) {\n        var hours = date.getHours();\n\n        if (dayTimes.morning && hours >= 5 && hours <= 11) {\n          return true;\n        }\n\n        if (dayTimes.afternoon && hours >= 12 && hours <= 16) {\n          return true;\n        }\n\n        if (dayTimes.evening && hours >= 17 && hours <= 20) {\n          return true;\n        }\n\n        if (dayTimes.night && (hours >= 21 || hours <= 4)) {\n          return true;\n        }\n\n        return false;\n      }\n    }]);\n\n    return FilterTripsService;\n  }();\n\n  FilterTripsService.ɵfac = function FilterTripsService_Factory(t) {\n    return new (t || FilterTripsService)();\n  };\n\n  FilterTripsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: FilterTripsService,\n    factory: FilterTripsService.ɵfac,\n    providedIn: 'root'\n  });\n  return FilterTripsService;\n})();","map":null,"metadata":{},"sourceType":"module"}